max_step = 10000

# geometry parameters
geometry.prob_lo = 0.0 0.0 -64.0
geometry.prob_hi = 128.0 128.0 64.0
geometry.is_periodic = 0 0 0

# timestepping
amr.n_cell  = 128 128 128
amr.max_level = 0
amr.max_grid_size = 32
amr.blocking_factor_x = 2
amr.blocking_factor_y = 1
amr.blocking_factor_z = 1
amr.plot_int = 100
amr.chk_int = 10000000
amr.file_name_digits = 5

lbm.bc_lo = 5 5 5
lbm.bc_hi = 5 5 5
lbm.dx_outer = 1.0
lbm.dt_outer = 1.0

lbm.nu = 0.008
lbm.alpha = 0.008
lbm.n_components = 1
lbm.diffusivity_component_0 = 0.008
lbm.initial_temperature = 0.03333
lbm.adiabatic_exponent = 1.4
lbm.save_streaming = 0
lbm.compute_forces = 1

lbm.body_is_isothermal = 0
#lbm.body_temperature = 0.060

#lbm.velocity_bc_type = "parabolic"
#velocity_bc_parabolic.Mach_ref = 0.1
#velocity_bc_parabolic.normal_dir = 1
#velocity_bc_parabolic.tangential_dir = 0
#velocity_bc_parabolic.initial_density = 1.0
#velocity_bc_parabolic.initial_temperature = 0.03333
#velocity_bc_parabolic.adiabatic_exponent = 1.4

lbm.ic_type = "constant"
ic_constant.mach_components = 0.0 0.0 0.0
ic_constant.density = 1.0
ic_constant.initial_temperature = 0.03333
ic_constant.adiabatic_exponent = 1.4

ic_constant_component_0.mach_components = 0.0 0.0 0.0
ic_constant_component_0.density = 0.10
ic_constant_component_0.initial_temperature = 0.03333

# Boundary conditions for component 0 (if using constant/channel/parabolic BCs)
# velocity_bc_constant_component_0.initial_density = 0.10
# velocity_bc_constant_component_0.initial_temperature = 0.03333

# MOVING BODY PARAMETERS
body.is_moving = true
body.velocity = 0.0 0.0 0.0
body.angular_velocity = 0.0 0.0 0.0005
body.center = 64.0 64.0 0.0

# Moving body geometry (STL)
eb2.geom_type = "all_regular"
eb2.stl_file = "impeller.stl"
eb2.stl_center = 64.0 64.0 0.0
eb2.stl_scale = 1.0
eb2.stl_reverse_normal = 0

# STATIONARY BODY PARAMETERS (STL)
# Using the generated baffled wall STL
eb2.stationary_stl_file = "baffled_wall.stl"
eb2.stationary_stl_center = 0.0 0.0 0.0
eb2.stationary_stl_scale = 1.0
eb2.stationary_stl_reverse_normal = 0

# Alternatively, you can use a CSV file:
# eb2.stationary_crack_file = "impeller.csv"

amrex.fpe_trap_invalid = 1
amrex.fpe_trap_zero = 1
amrex.fpe_trap_overflow = 1
amrex.the_arena_is_managed = 0
amrex.abort_on_out_of_gpu_memory = 1
